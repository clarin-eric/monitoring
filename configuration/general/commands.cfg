###
### general
###

define command {
    command_line    $USER1$/check_dummy 0
    command_name    check_dummy
}

define command {
    command_line    $USER1$/check_http $ARG1$
    command_name    check_http_redefined
}

define command {
    # command is invoked after freshness is not given and emails are sent.
    # TODO: meaning? for hosts that we only get passive results from, this
    command_line    $USER1$/check_dummy 4 "UNKNOWN: Attention, did not get fresh checks!"
    command_name    freshness_warning
}

define command {
    command_line    $USER1$/check_ping -H $HOSTADDRESS$ -w 3000.0,80% -c 5000.0,100% -p 5
    command_name    check-ping
}

define command {
    command_line    curl --tlsv1.2 -e 'https://clarin.fz-juelich.de/icinga/' -f -L -s -v -o /dev/null -w '@$USER2$/curl.format' '$ARG1$://$ARG2$:$ARG4$/$ARG3$' 2>&1 || exit 2
    command_name    curl_probe
}

define command {
    command_line    curl --tlsv1.2 -e 'https://clarin.fz-juelich.de/icinga/' -f -L -s -v -o /dev/null -w '@$USER2$/curl.format' '$ARG1$://$ARG2$:$ARG4$/$ARG3$' 2>&1 || curl -s -I '$ARG1$://$ARG2$:$ARG4$/$ARG3$' | grep -Eio 'Retry-After: [[:digit:]]+' || exit 2
    command_name    curl_probe_oai_pmh
}

define command {
    command_line    curl --tlsv1.2 -e 'https://clarin.fz-juelich.de/icinga/' -f -L -s -v -w '@$USER2$/curl.format' -H 'Accept: application/json' '$ARG1$://$ARG2$:$ARG4$/$ARG3$' | python -I -m json.tool 1> /dev/null 2>&1 || exit 2
    command_name    curl_probe_json
}

define command {
    command_line    curl --tlsv1.2 -e 'https://clarin.fz-juelich.de/icinga/' -f -L -s -v -w '@$USER2$/curl.format' -H 'Accept: application/xml' '$ARG1$://$ARG2$:$ARG4$/$ARG3$' | xmllint --valid - 1> /dev/null || exit 2
    command_name    curl_probe_xml
}

###
### Centre Registry automation
###

define command {
    command_line    $USER2$/mpi/check_lat_cql_endpoint.py -s $ARG1$ -h $ARG2$ -u $ARG3$ -p $ARG4$
    command_name    check_cql
}

#define command {
#    command_line   $USER2$/mpi/check_lat_oai_endpoint.py -s $ARG1$ -h $ARG2$ -u $ARG3$ -p $ARG4$
#    command_name   check_oai
#}

define command {
    command_line   curl --tlsv1.2 -e 'https://clarin.fz-juelich.de/icinga/' -f -L -s -v -o /dev/null -w '@$USER2$/curl.format' '$ARG1$://$ARG2$:$ARG4$/$ARG3$' 2>&1 || curl -s -I '$ARG1$://$ARG2$:$ARG4$/$ARG3$' | grep -Eio 'Retry-After: [[:digit:]]+' || exit 2
    command_name   check_oai
}

###
### Weblicht
###

define command {
    command_line    $USER2$/tue/jar_wrapper.sh $ARG1$ $ARG2$ $ARG3$
    command_name    jar_wrapper
}

###
### Tuebingen
###

define command {
    command_line    $USER2$/tue/check_convert-all.sh $HOSTADDRESS$
    command_name    check_convert-all
}

###
### old
###

define command {
    command_line    python $USER2$/mpi/check_lat_annex.py -s $ARG1$ -h $HOSTADDRESS$ -u $ARG2$ -p $ARG3$
    command_name    check_annex
}

define command {
    command_line    python $USER2$/mpi/check_lat_handle.py -s $ARG1$ -h $HOSTADDRESS$ -u $ARG2$ -p $ARG3$
    command_name    check_handle
}

define command {
    command_line    python $USER2$/mpi/check_lat_imdi.py -s $ARG1$ -h $HOSTADDRESS$ -u $ARG2$ -p $ARG3$
    command_name    check_imdi
}

define command {
    command_line    python $USER2$/mpi/check_lat_lamus.py -s $ARG1$ -h $HOSTADDRESS$ -u $ARG2$ -p $ARG3$
    command_name    check_lamus
}

define command {
    command_line    python $USER2$/mpi/check_lat_lexus.py -s $ARG1$ -h $HOSTADDRESS$ -u $ARG2$ -p $ARG3$
    command_name    check_lexus
}

